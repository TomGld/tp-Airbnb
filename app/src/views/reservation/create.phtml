<?php

use App\Model\Repository\RepoManager;

?>
<div>
    <a href="/reservations">üîô Retour</a>
</div>
<h1>Cr√©er une r√©servation</h1>

<div class="container-body">

    <!-- formulaire de r√©servation d'un bien-->
    <form action="/reservations" method="post">
        <fieldset>
            <div><!-- Titre de l'annonce --></div>
            <div>
                <label for="dateStart">Date de d'arriv√©e :</label>
                <input type="datetime" name="dateFrom" id="dateFrom">
            </div>
            <div>
                <label for="dateEnd">Date de d√©part :</label>
                <input type="datetime" name="dateTo" id="dateTo">
            </div>
            <div>
                <label for="rental">Location :</label>
                <?php $rentals = RepoManager::getRM()->getAccommodationRepo()->getAll(); ?>
                <select name="rental_id" id="rental">
                    <?php if (isset($_GET['id'])) { //TODO: s√©curiser le $_GET
                        foreach ($accommodations as $accommodation) {
                            if ($rental->getId() == $_GET['id']) {
                                echo "<option value='" . $accommodation->getId() . "' selected>" . $accommodation->getTitle() . "</option>";
                            } else {
                                echo "<option value='" . $accommodation->getId() . "'>" . $accommodation->getTitle() . "</option>";
                            }
                        }
                    } else {
                        foreach ($accommodations as $accommodation):
                            echo "<option value='" . $accommodation->getId() . "'>" . $accommodation->getTitle() . "</option>";
                        endforeach;
                    } ?>
                </select>
            </div>
        </fieldset>
        <div class="button">
            <button type="submit">R√©server</button>
        </div>
    </form>
</div>